
<%- include('partials/logged-in-header') -%>

<div class="pt-3 pl-5 bg-textbox">
  <div class="divider"></div>
  <p class="mt-24 font-bold">Hi, <%= user.userName %>!</p>
  <!-- <p class="mb-8 font-bold">Email: <%= user.email %></p> -->
  <h1 class="mb-4 text-center text-2xl">Your Gratitude</h1>
  <div class="flex justify-center my-10">
    <a role="button" class="btn mr-2 btn-sm text-white shadow-button" href="/7531">Create Post</a>
    <a role="button" class="btn mr-2 btn-sm text-white shadow-button" href="/feed">Explore</a>
    <!-- <a role="button" class="btn mr-2 btn-sm text-white" href="/dashboard">Mood Tracker</a> -->
  </div>
</div>

<div class="container mx-auto px-4">
  <!-- <p class="mb-1 text-center font-bold">Your Gratitude</p> -->
</div>

  <div id="post-carousel" class="mx-auto grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 lg:gap-24 gap-6 col-10 shadow">
    <% for(var i=0; i<posts.length; i++) {%>
      <a href="/post/<%= posts[i]._id%>" class="place-item-stretch">
        <div class="rounded-lg overflow-hidden shadow-lg">
          <img class="card-img-top h-60 w-full object-cover object-center" src="<%= posts[i].image%>" alt="">
          <div class="px-6 bg-texture1">
            <div class="font-bold text-xs mb-2"><%= posts[i].one %></div>
            <p class="text-gray-700 text-base">
              <%= posts[i].createdAt.toLocaleDateString() %>
            </p>
          </div>
        </div>
      </a>
    <% } %>
  </div>
</div>


<div class="divider bg-textbox m-0 "></div>
<div class="divider bg-textbox m-0"></div>
<section class="bg-texture1 pb-5 ">
<section class="w-[294px]  mx-auto mb-3 bg-texture1">
     <div class="mb-10">
        <a href="/profile">
        <h1 class='text-2xl font-bold text-center pt-8'>A look at your Mood this week</h1>
      </a>
      <div class="flex justify-center mb-2"></div>
      <a role="button" class=" buttonStyle text-center block text-l text-white font-bold bg-buttonBg w-[130px] py-1 shadow-button my-5 ml-20 mx-auto" href="/dashboard">Mood Tracker</a>
    </div>
    </div>
  <!-- link to Check In view -->
  <a href="/checkin" class="buttonStyle text-center block text-l text-white font-bold bg-buttonBg w-[130px] py-1 shadow-button mb-5 ml-20 mx-auto">check in</a>
</section>
<section class=" flex flex-wrap justify-center w-[350 px] bg-texture1">
  
  <!-- Renders available check ins -->
  <% for (let i=0; i < checkin.length; i++) { %>
      <% if (checkin[i].scaleNumber===5) { %>
          <div class="relative flex flex-col items-center group">
              <div
                  class="h-[42px] w-[42px] border border-gridBorder bg-moodBlue hover:border-2 hover:border-bgColor">
              </div>
              <div class="absolute top-0 hidden mt-6 group-hover:flex">
                  <span
                      class="fixed inset-x-1/2 -translate-x-1/2 z-10 p-2 space-y-2 flex flex-col text-xs w-[252px] border border-gridBorder leading-none text-mainTextColor whitespace-no-wrap bg-bgColor">
                      <span>
                          <span class="fa-regular fa-face-sad-cry"></span><span class="font-semibold"> I
                              felt terrible.</span></span>
                      <span>
                          <%= moment.utc(checkin[i].date).format( 'MMMM DD, YYYY' ) %>
                      </span>
                      <span>
                          <%= checkin[i].note %>
                      </span>
                  </span>
              </div>
          </div>
      <% } %>
      <% if (checkin[i].scaleNumber===4) { %>
          <div class="relative flex flex-col items-center group">
              <div
                  class="h-[42px] w-[42px] border border-gridBorder bg-moodPurple hover:border-2 hover:border-bgColor">
              </div>
              <div class="absolute top-0 hidden mt-6 group-hover:flex">
                  <span
                      class="fixed inset-x-1/2 -translate-x-1/2 z-10 p-2 space-y-2 flex flex-col text-xs w-[252px] border border-gridBorder leading-none text-mainTextColor whitespace-no-wrap bg-bgColor">
                      <span>
                          <span class="fa-regular fa-face-frown"></span><span
                              class="font-semibold"> I felt bad.</span></span>
                      <span>
                          <%= moment.utc(checkin[i].date).format( 'MMMM DD, YYYY' ) %>
                      </span>
                      <span>
                          <%= checkin[i].note %>
                      </span>
                  </span>
              </div>
          </div>
      <% } %>
      <% if (checkin[i].scaleNumber===3) { %>
          <div class="relative flex flex-col items-center group">
              <div
                  class="h-[42px] w-[42px] border border-gridBorder bg-moodPink hover:border-2 hover:border-bgColor">
              </div>
              <div class="absolute top-0  hidden mt-6 group-hover:flex">
                  <span
                      class="fixed inset-x-1/2 -translate-x-1/2 z-10 p-2 space-y-2 flex flex-col text-xs w-[252px] border border-gridBorder leading-none text-mainTextColor whitespace-no-wrap bg-bgColor">
                      <span>
                          <span class="fa-regular fa-face-meh"></span><span
                              class="font-semibold"> I felt okay.</span></span>
                      <span>
                          <%= moment.utc(checkin[i].date).format( 'MMMM DD, YYYY' ) %>
                      </span>
                      <span>
                          <%= checkin[i].note %>
                      </span>
                  </span>
              </div>
          </div>
      <% } %>
      <% if (checkin[i].scaleNumber===2) { %>
          <div class="relative flex flex-col items-center group">
              <div
                  class="h-[42px] w-[42px] border border-gridBorder bg-moodOrange hover:border-2 hover:border-bgColor">
              </div>
              <div class="absolute top-0 hidden mt-6 group-hover:flex">
                  <span
                      class="fixed inset-x-1/2 -translate-x-1/2 z-10 p-2 space-y-2 flex flex-col text-xs w-[252px] border border-gridBorder leading-none text-mainTextColor whitespace-no-wrap bg-bgColor">
                      <span>
                          <span class="fa-regular fa-face-grin-wide"></span><span
                              class="font-semibold"> I felt good.</span></span>
                      <span>
                          <%= moment.utc(checkin[i].date).format( 'MMMM DD, YYYY'
                              ) %>
                      </span>
                      <span>
                          <%= checkin[i].note %>
                      </span>
                  </span>
              </div>
          </div>
      <% } %>
      <% if (checkin[i].scaleNumber===1) { %>
          <div class="relative flex flex-col items-center group">
              <div
                  class="h-[42px] w-[42px] border border-gridBorder bg-moodYellow hover:border-2 hover:border-bgColor">
              </div>
              <div class="absolute top-0 hidden mt-6 group-hover:flex">
                  <span
                      class="fixed inset-x-1/2 -translate-x-1/2 z-10 p-2 space-y-2 flex flex-col text-xs w-[252px] border border-gridBorder leading-none text-mainTextColor whitespace-no-wrap bg-textbox">
                      <span>
                          <span
                              class="fa-regular fa-face-laugh-beam"></span><span
                              class="font-semibold"> I felt
                              great.</span></span>
                      <span>
                          <%= moment.utc(checkin[i].date).format( 'MMMM DD, YYYY'
                              ) %>
                      </span>
                      <span>
                          <%= checkin[i].note %>
                      </span>
                  </span>
              </div>
          </div>
      <% } %>
  <% } %>
  <!-- Renders empty squares up to 70 -->
  <% if (checkin.length < 7) { %>
      <% for (let i=0; i < (7 - checkin.length); i++) {%>
          <div
              class="h-[42px] w-[42px] border border-gridBorder">
          </div>
      <% } %>
  <% } %>
  <div class="divider"></div>
  <div class="divider"></div>
  
</section>
</section>
<script>       $(document).ready(function(){
    $('#post-carousel').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 3000,
      responsive: [
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 2
          }
        },
        {
          breakpoint: 480,
          settings: {
            slidesToShow: 1
          }
        }
      ]
    });
  });</script>
      
<%- include('partials/footer') -%>